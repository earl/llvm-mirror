; Test that the native PDB reader can enumerate pointer types.  The output
; being checked against is golden output generated by llvm-pdbutil without
; the -native flag.  Then we check that we generate the same output.

; RUN: llvm-pdbutil diadump -no-ids -native -pointers \
; RUN:     %p/../Inputs/every-pointer.pdb | FileCheck %s

; CHECK:      {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 1
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 1
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 1
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 1
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 1
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 1
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 1
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 1
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 1
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 1
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 1
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 1
; FIXME:        isSingleInheritance: 1   # DIA has this property for member pointers
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 4
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 1
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; FIXME:        isSingleInheritance: 1   # DIA has this property for member pointers
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 1
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; FIXME:        isSingleInheritance: 1   # DIA has this property for member pointers
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 1
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 1
; CHECK-NEXT:   reference: 0
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }
; CHECK-NEXT: {
; CHECK-NEXT:   symTag: PointerType
; CHECK-NEXT:   length: 8
; CHECK-NEXT:   constType: 0
; CHECK-NEXT:   isPointerToDataMember: 0
; CHECK-NEXT:   isPointerToMemberFunction: 0
; CHECK-NEXT:   RValueReference: 0
; CHECK-NEXT:   reference: 1
; CHECK-NEXT:   restrictedType: 0
; CHECK-NEXT:   unalignedType: 0
; CHECK-NEXT:   volatileType: 0
; CHECK-NEXT: }