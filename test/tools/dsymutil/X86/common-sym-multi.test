RUN: dsymutil -oso-prepend-path %p/../Inputs %p/../Inputs/private/tmp/common/com -f -o - | llvm-dwarfdump -debug-info - | FileCheck %s
RUN: dsymutil -oso-prepend-path %p/../Inputs %p/../Inputs/private/tmp/common/com -dump-debug-map | FileCheck %s --check-prefix DEBUGMAP

The test was compiled from two source files:
$ cd /private/tmp/common
$ cat com1.c
int i[1000];
int main() {
  return i[1];
}
$ cat com2.c
extern int i[1000];
int bar() {
  return i[0];
}
$ clang -fcommon -g -c com1.c -o com1.o
$ clang -fcommon -g -c com2.c -o com2.o
$ clang -fcommon -g com1.o com2.o -o com

CHECK: DW_TAG_compile_unit
CHECK:   DW_TAG_variable
CHECK-NOT: {{NULL|DW_TAG}}
CHECK:     DW_AT_name{{.*}}"i"
CHECK-NOT: {{NULL|DW_TAG}}
CHECK:     DW_AT_location{{.*}}DW_OP_addr 0x100001000)

CHECK: DW_TAG_compile_unit
CHECK:   DW_TAG_variable
CHECK-NOT: {{NULL|DW_TAG}}
CHECK:     DW_AT_name{{.*}}"i"
CHECK-NOT: {{NULL|DW_TAG}}
CHECK:     DW_AT_location{{.*}}DW_OP_addr 0x100001000)

DEBUGMAP: filename:{{.*}}com1.o
DEBUGMAP: symbols:
DEBUGMAP: sym: _i, binAddr: 0x0000000100001000, size: 0x00000000
DEBUGMAP: filename:{{.*}}com2.o
DEBUGMAP: symbols:
DEBUGMAP: sym: _i, binAddr: 0x0000000100001000, size: 0x00000000
